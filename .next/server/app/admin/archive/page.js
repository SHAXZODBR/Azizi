(()=>{var e={};e.id=959,e.ids=[959],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3873:e=>{"use strict";e.exports=require("path")},9551:e=>{"use strict";e.exports=require("url")},1621:(e,r,a)=>{"use strict";a.r(r),a.d(r,{GlobalError:()=>n.a,__next_app__:()=>m,pages:()=>c,routeModule:()=>u,tree:()=>o});var i=a(260),s=a(8203),t=a(5155),n=a.n(t),d=a(7292),l={};for(let e in d)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>d[e]);a.d(r,l);let o=["",{children:["admin",{children:["archive",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,2165)),"/home/shaxzodbr/Desktop/Azizi/Azizi/app/admin/archive/page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,6055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(a.bind(a,638)),"/home/shaxzodbr/Desktop/Azizi/Azizi/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,9937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(a.t.bind(a,9116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(a.t.bind(a,1485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,6055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["/home/shaxzodbr/Desktop/Azizi/Azizi/app/admin/archive/page.tsx"],m={require:a,loadChunk:()=>Promise.resolve()},u=new i.AppPageRouteModule({definition:{kind:s.RouteKind.APP_PAGE,page:"/admin/archive/page",pathname:"/admin/archive",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},4865:(e,r,a)=>{"use strict";a.r(r),a.d(r,{"0001d7ef38a99125a253a4498c6335a44ada40af3c":()=>i.Ht,"0061a62c662b99e5e74588b40eb5e22a2ab9642e7f":()=>i.ri,"407e71705483824f457627136b7a8c27fd7b46888e":()=>i.iD,"40f8c244340ade15eee8c217d8cbe7e76068a9fff6":()=>i.kz});var i=a(393)},7842:(e,r,a)=>{Promise.resolve().then(a.t.bind(a,9607,23))},3613:(e,r,a)=>{Promise.resolve().then(a.t.bind(a,8531,23))},393:(e,r,a)=>{"use strict";a.d(r,{Ht:()=>m,iD:()=>l,kz:()=>o,ri:()=>c});var i=a(8977);a(8063);var s=a(4512),t=a(1831),n=a(6215);let d=[{id:1,name:"Admin User",email:"admin@example.com",password:"admin123",role:"admin"},{id:2,name:"Regular User",email:"user@example.com",password:"user123",role:"user"}];async function l(e){let r=e.get("email"),a=e.get("password"),i=d.find(e=>e.email===r&&e.password===a);if(!i){console.error("Invalid credentials");return}let n={userId:i.id,name:i.name,email:i.email,role:i.role,expires:new Date(Date.now()+6048e5)};(0,s.UL)().set("session",JSON.stringify(n),{httpOnly:!0,secure:!0,maxAge:604800,path:"/"}),"admin"===i.role?(0,t.redirect)("/admin/archive"):(0,t.redirect)("/archive")}async function o(e){e.get("name"),e.get("email"),e.get("password"),e.get("role"),(0,t.redirect)("/login")}async function c(){(0,s.UL)().delete("session"),(0,t.redirect)("/login")}async function m(){let e=s.UL().get("session")?.value;return e?JSON.parse(e):null}(0,n.D)([l,o,c,m]),(0,i.A)(l,"407e71705483824f457627136b7a8c27fd7b46888e",null),(0,i.A)(o,"40f8c244340ade15eee8c217d8cbe7e76068a9fff6",null),(0,i.A)(c,"0061a62c662b99e5e74588b40eb5e22a2ab9642e7f",null),(0,i.A)(m,"0001d7ef38a99125a253a4498c6335a44ada40af3c",null)},2165:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>c});var i=a(2740),s=a(9607),t=a.n(s),n=a(393),d=a(1831);let l=async()=>[{year:2025,entries:{0:{id:"510",number:510,status:"В печати"}}},{year:2024,entries:{0:{id:"498",number:498},1:{id:"499",number:499},2:{id:"500",number:500},3:{id:"501",number:501},4:{id:"502",number:502},5:{id:"503",number:503},6:{id:"504",number:504},7:{id:"505",number:505},8:{id:"506",number:506},9:{id:"507",number:507},10:{id:"508",number:508},11:{id:"509",number:509}}},{year:2023,entries:{0:{id:"486",number:486},1:{id:"487",number:487},2:{id:"488",number:488},3:{id:"489",number:489},4:{id:"490",number:490},5:{id:"491",number:491},6:{id:"492",number:492},7:{id:"493",number:493},8:{id:"494",number:494},9:{id:"495",number:495},10:{id:"496",number:496},11:{id:"497",number:497}}}],o=["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"];async function c(){let e=await (0,n.Ht)();e&&"admin"===e.role||(0,d.redirect)("/login");let r=await l();return(0,i.jsxs)("div",{className:"min-h-screen flex flex-col",children:[(0,i.jsx)("header",{className:"border-b",children:(0,i.jsxs)("div",{className:"container flex h-16 items-center justify-between",children:[(0,i.jsx)("div",{className:"text-xl font-bold",children:"Панель администратора"}),(0,i.jsxs)("nav",{className:"flex gap-4",children:[(0,i.jsx)(t(),{href:"/archive",children:(0,i.jsx)("button",{className:"px-4 py-2 border rounded",children:"Просмотр архива"})}),(0,i.jsx)("form",{action:"/api/logout",method:"POST",children:(0,i.jsx)("button",{className:"px-4 py-2 border rounded",children:"Выйти"})})]})]})}),(0,i.jsxs)("div",{className:"container py-8",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,i.jsx)("h1",{className:"text-2xl font-bold",children:"Управление архивом"}),(0,i.jsx)(t(),{href:"/admin/archive/new-year",children:(0,i.jsx)("button",{className:"px-4 py-2 bg-blue-600 text-white rounded",children:"Добавить новый год"})})]}),(0,i.jsx)("div",{className:"overflow-x-auto",children:(0,i.jsxs)("table",{className:"w-full border-collapse",children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{className:"border p-2 bg-gray-100",children:"Год"}),o.map(e=>(0,i.jsx)("th",{className:"border p-2 bg-gray-100",children:e},e))]})}),(0,i.jsx)("tbody",{children:r.map(e=>(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{className:"border p-2 font-bold",children:e.year}),o.map((r,a)=>{let s=e.entries[a];return(0,i.jsx)("td",{className:"border p-2 text-center",children:s?(0,i.jsxs)("div",{className:"flex flex-col items-center gap-1",children:[(0,i.jsx)("div",{children:s.status?(0,i.jsx)("span",{className:"text-gray-600",children:s.status}):(0,i.jsxs)(t(),{href:`/archive/${s.id}`,className:"text-blue-600 hover:underline",children:["№",s.number]})}),(0,i.jsxs)("div",{className:"flex gap-1",children:[(0,i.jsx)(t(),{href:`/admin/archive/${s.id}/edit`,children:(0,i.jsx)("button",{className:"px-2 py-1 text-xs border border-blue-600 text-blue-600 rounded",children:"Изменить"})}),(0,i.jsx)("form",{action:`/api/archive/${s.id}/delete`,method:"POST",children:(0,i.jsx)("button",{className:"px-2 py-1 text-xs border border-red-600 text-red-600 rounded",children:"Удалить"})})]})]}):(0,i.jsx)(t(),{href:`/admin/archive/new?year=${e.year}&month=${a}`,children:(0,i.jsx)("button",{className:"px-2 py-1 text-xs border border-green-600 text-green-600 rounded",children:"+ Добавить"})})},a)})]},e.year))})]})})]})]})}},6055:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>s});var i=a(8077);let s=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,i.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]}};var r=require("../../../webpack-runtime.js");r.C(e);var a=e=>r(r.s=e),i=r.X(0,[638,348,607,77,512,16,854],()=>a(1621));module.exports=i})();