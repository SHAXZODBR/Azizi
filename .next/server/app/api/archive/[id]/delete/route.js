(()=>{var e={};e.id=848,e.ids=[848],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},432:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>g,routeModule:()=>u,serverHooks:()=>b,workAsyncStorage:()=>f,workUnitAsyncStorage:()=>p});var a={};r.r(a),r.d(a,{POST:()=>l});var i=r(2706),n=r(8203),c=r(5994),s=r(9187),o=r(393),d=r(7513);async function l(e,{params:t}){let r=await (0,o.Ht)();return r&&"admin"===r.role?(await (0,d.rx)(t.id),s.NextResponse.redirect(new URL("/admin/archive",process.env.NEXT_PUBLIC_APP_URL))):s.NextResponse.json({error:"Unauthorized"},{status:403})}let u=new i.AppRouteRouteModule({definition:{kind:n.RouteKind.APP_ROUTE,page:"/api/archive/[id]/delete/route",pathname:"/api/archive/[id]/delete",filename:"route",bundlePath:"app/api/archive/[id]/delete/route"},resolvedPagePath:"/home/shaxzodbr/Desktop/Azizi/Azizi/app/api/archive/[id]/delete/route.ts",nextConfigOutput:"",userland:a}),{workAsyncStorage:f,workUnitAsyncStorage:p,serverHooks:b}=u;function g(){return(0,c.patchFetch)({workAsyncStorage:f,workUnitAsyncStorage:p})}},4748:(e,t,r)=>{"use strict";r.r(t),r.d(t,{"0001d7ef38a99125a253a4498c6335a44ada40af3c":()=>a.Ht,"0061a62c662b99e5e74588b40eb5e22a2ab9642e7f":()=>a.ri,"4024106edc32fef040459cbb010dd1291fef996fad":()=>i.Wc,"405a4e59d078c079e8860abb349743f9a4b2892f39":()=>i.rx,"407e71705483824f457627136b7a8c27fd7b46888e":()=>a.iD,"4094af120aa43bbbabaf5cefc6a2179a64a02707c2":()=>i.iZ,"40b495e5adfa59f686b496fb1ba48ab0757bc39210":()=>i.tt,"40df380db1c0a2bdbee99f3a214b6ad62addfe45e0":()=>i.Ko,"40e56b8073617e7f366272b63b24b7ed2086d8dc71":()=>i.N6,"40f8c244340ade15eee8c217d8cbe7e76068a9fff6":()=>a.kz,"60b774b261aa64beb18232e5e2516656ec4597d9ac":()=>i.a});var a=r(393),i=r(7513)},6487:()=>{},8335:()=>{},7513:(e,t,r)=>{"use strict";r.d(t,{Ko:()=>s,N6:()=>u,Wc:()=>l,a:()=>p,iZ:()=>f,rx:()=>d,tt:()=>o});var a=r(8977);r(8063);var i=r(1482),n=r(1831),c=r(393);async function s(e){let t=await (0,c.Ht)();t&&"admin"===t.role||(0,n.redirect)("/login");let r=Number.parseInt(e.get("year"));console.log("Creating issue:",{year:r,month:Number.parseInt(e.get("month")),number:Number.parseInt(e.get("number")),status:e.get("status")}),(0,i.revalidatePath)("/archive"),(0,i.revalidatePath)("/admin/archive"),(0,n.redirect)("/admin/archive")}async function o(e){let t=await (0,c.Ht)();t&&"admin"===t.role||(0,n.redirect)("/login");let r=e.get("id"),a=Number.parseInt(e.get("year")),s=Number.parseInt(e.get("month")),o=Number.parseInt(e.get("number")),d=e.get("status");e.get("pdf"),console.log("Updating issue:",{id:r,year:a,month:s,number:o,status:d}),(0,i.revalidatePath)("/archive"),(0,i.revalidatePath)(`/archive/${r}`),(0,i.revalidatePath)("/admin/archive"),(0,n.redirect)("/admin/archive")}async function d(e){let t=await (0,c.Ht)();t&&"admin"===t.role||(0,n.redirect)("/login"),console.log("Deleting issue:",e),(0,i.revalidatePath)("/archive"),(0,i.revalidatePath)("/admin/archive"),(0,n.redirect)("/admin/archive")}async function l(e){let t=await (0,c.Ht)();t&&"admin"===t.role||(0,n.redirect)("/login"),console.log("Creating year:",Number.parseInt(e.get("year"))),(0,i.revalidatePath)("/archive"),(0,i.revalidatePath)("/admin/archive"),(0,n.redirect)("/admin/archive")}async function u(e){let t=await (0,c.Ht)();t&&"admin"===t.role||(0,n.redirect)("/login");let r=e.get("issueId"),a=e.get("category"),s=e.get("authors"),o=e.get("title"),d=e.get("pages"),l=Number.parseInt(e.get("articleNumber"));e.get("pdf"),console.log("Creating article:",{issueId:r,category:a,authors:s,title:o,pages:d,articleNumber:l}),(0,i.revalidatePath)(`/archive/${r}`),(0,n.redirect)(`/archive/${r}`)}async function f(e){let t=await (0,c.Ht)();t&&"admin"===t.role||(0,n.redirect)("/login");let r=e.get("issueId"),a=e.get("articleId"),s=e.get("category"),o=e.get("authors"),d=e.get("title"),l=e.get("pages"),u=Number.parseInt(e.get("articleNumber"));e.get("pdf"),console.log("Updating article:",{issueId:r,articleId:a,category:s,authors:o,title:d,pages:l,articleNumber:u}),(0,i.revalidatePath)(`/archive/${r}`),(0,n.redirect)(`/archive/${r}`)}async function p(e,t){let r=await (0,c.Ht)();r&&"admin"===r.role||(0,n.redirect)("/login"),console.log("Deleting article:",{issueId:e,articleId:t}),(0,i.revalidatePath)(`/archive/${e}`),(0,n.redirect)(`/archive/${e}`)}(0,r(6215).D)([s,o,d,l,u,f,p]),(0,a.A)(s,"40df380db1c0a2bdbee99f3a214b6ad62addfe45e0",null),(0,a.A)(o,"40b495e5adfa59f686b496fb1ba48ab0757bc39210",null),(0,a.A)(d,"405a4e59d078c079e8860abb349743f9a4b2892f39",null),(0,a.A)(l,"4024106edc32fef040459cbb010dd1291fef996fad",null),(0,a.A)(u,"40e56b8073617e7f366272b63b24b7ed2086d8dc71",null),(0,a.A)(f,"4094af120aa43bbbabaf5cefc6a2179a64a02707c2",null),(0,a.A)(p,"60b774b261aa64beb18232e5e2516656ec4597d9ac",null)},393:(e,t,r)=>{"use strict";r.d(t,{Ht:()=>u,iD:()=>o,kz:()=>d,ri:()=>l});var a=r(8977);r(8063);var i=r(4512),n=r(1831),c=r(6215);let s=[{id:1,name:"Admin User",email:"admin@example.com",password:"admin123",role:"admin"},{id:2,name:"Regular User",email:"user@example.com",password:"user123",role:"user"}];async function o(e){let t=e.get("email"),r=e.get("password"),a=s.find(e=>e.email===t&&e.password===r);if(!a){console.error("Invalid credentials");return}let c={userId:a.id,name:a.name,email:a.email,role:a.role,expires:new Date(Date.now()+6048e5)};(0,i.UL)().set("session",JSON.stringify(c),{httpOnly:!0,secure:!0,maxAge:604800,path:"/"}),"admin"===a.role?(0,n.redirect)("/admin/archive"):(0,n.redirect)("/archive")}async function d(e){e.get("name"),e.get("email"),e.get("password"),e.get("role"),(0,n.redirect)("/login")}async function l(){(0,i.UL)().delete("session"),(0,n.redirect)("/login")}async function u(){let e=i.UL().get("session")?.value;return e?JSON.parse(e):null}(0,c.D)([o,d,l,u]),(0,a.A)(o,"407e71705483824f457627136b7a8c27fd7b46888e",null),(0,a.A)(d,"40f8c244340ade15eee8c217d8cbe7e76068a9fff6",null),(0,a.A)(l,"0061a62c662b99e5e74588b40eb5e22a2ab9642e7f",null),(0,a.A)(u,"0001d7ef38a99125a253a4498c6335a44ada40af3c",null)},2828:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{INTERCEPTION_ROUTE_MARKERS:function(){return i},extractInterceptionRouteInformation:function(){return c},isInterceptionRouteAppPath:function(){return n}});let a=r(2045),i=["(..)(..)","(.)","(..)","(...)"];function n(e){return void 0!==e.split("/").find(e=>i.find(t=>e.startsWith(t)))}function c(e){let t,r,n;for(let a of e.split("/"))if(r=i.find(e=>a.startsWith(e))){[t,n]=e.split(r,2);break}if(!t||!r||!n)throw Error(`Invalid interception route: ${e}. Must be in the format /<intercepting route>/(..|...|..)(..)/<intercepted route>`);switch(t=(0,a.normalizeAppPath)(t),r){case"(.)":n="/"===t?`/${n}`:t+"/"+n;break;case"(..)":if("/"===t)throw Error(`Invalid interception route: ${e}. Cannot use (..) marker at the root level, use (.) instead.`);n=t.split("/").slice(0,-1).concat(n).join("/");break;case"(...)":n="/"+n;break;case"(..)(..)":let c=t.split("/");if(c.length<=2)throw Error(`Invalid interception route: ${e}. Cannot use (..)(..) marker at the root level or one level up.`);n=c.slice(0,-2).concat(n).join("/");break;default:throw Error("Invariant: unexpected marker")}return{interceptingRoute:t,interceptedRoute:n}}},164:(e,t)=>{"use strict";function r(e){return e.startsWith("/")?e:"/"+e}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ensureLeadingSlash",{enumerable:!0,get:function(){return r}})},2045:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{normalizeAppPath:function(){return n},normalizeRscURL:function(){return c}});let a=r(164),i=r(8758);function n(e){return(0,a.ensureLeadingSlash)(e.split("/").reduce((e,t,r,a)=>!t||(0,i.isGroupSegment)(t)||"@"===t[0]||("page"===t||"route"===t)&&r===a.length-1?e:e+"/"+t,""))}function c(e){return e.replace(/\.rsc($|\?)/,"$1")}}};var t=require("../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[638,348,512,16,482,452],()=>r(432));module.exports=a})();